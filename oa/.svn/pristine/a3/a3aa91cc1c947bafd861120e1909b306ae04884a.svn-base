<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags" %>
<!DOCTYPE html> 
<html lang="zh-CN">
<body>
<div class="container-fluid">
      <div class="row">
        <s:set name="panel" value="'application'"></s:set>
       	<s:set name="selectedPanel" value="'newContractBorrow'"></s:set>
        <%@include file="/pages/administration/panel.jsp" %>	
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
        	<form action="personal/save_startContractBorrow" method="post"  id="form_"class="form-horizontal" onsubmit="Load.Base.LoadingPic.FullScreenShow(null)">  
        	  <s:token></s:token>
        	  <h3 class="sub-header" style="margin-top:0px;">发起合同借阅申请</h3> 			 
				  <input style="display:none" name="contractBorrowVo.contractId"  value="${contract.id}"/>
			  	  <input style="display:none" name="contractBorrowVo.contractName"  value="${contract.name}"/>
  			  	  <input style="display:none" name="contractBorrowVo.userName"  value="${staff.lastName}"/>
  			  	  <input style="display:none" name="contractBorrowVo.userId"  value="${staff.userID}"/>  
			  <div class="form-group">
			  	<label for="reason" class="col-sm-1 control-label">合同名称</label>
			  	<div class="col-sm-2">${contract.name}</div>
			  </div>
			  <div class="form-group">
			  	<label for="reason" class="col-sm-1 control-label">申请理由</label>
			  	<div class="col-sm-5"><input type="text" autoComplete="off" class="form-control" name="contractBorrowVo.reason" ></div>
			  </div>
			 
			  <div class="form-group">
 			  	<label for="reason" class="col-sm-1 control-label">是否外借</label>
 			  	<div class="col-sm-2">
 			  		<select class="form-control"  name="contractBorrowVo.isBorrow" required="required">
				      		<option value="0">否</option>
				      		<option value="1">是</option>
					</select>
 			  	</div>
			  </div>
			  <div class="form-group" id="borrowTimeDiv"  style="display:none">
			  	<label for="reason" class="col-sm-1 control-label">开始时间</label>
			  	<div class="col-sm-2"><input type="text" autoComplete="off" class="form-control" id="startTime" name="contractBorrowVo.startTime"  onclick="var endTime=$dp.$('endTime');WdatePicker({onpicked:function(){endTime.focus();},maxDate:'#F{$dp.$D(\'endTime\')}',dateFmt:'yyyy-MM-dd HH:mm:ss'})"></div>
			 	<label for="reason" class="col-sm-1 control-label">结束时间</label>
			  	<div class="col-sm-2"><input type="text" autoComplete="off" class="form-control" id="endTime" name="contractBorrowVo.endTime" onclick="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss',minDate:'#F{$dp.$D(\'startTime\')}'})"></div>
			  </div>
			  <div class="form-group">
			    <button type="submit" class="btn btn-primary" style="margin-left:5%">提交</button>
			    <button type="button" class="btn btn-default" onclick="location.href='javascript:history.go(-1);'" style="margin-left:15px;">返回</button>
			  </div>
			</form>
        </div>
      </div>
      </div>
      <script src="/assets/js/underscore-min.js"></script>
      <script>
      
      
      var init=+function(){
    	  $('select[name="contractBorrowVo.isBorrow"]').change(function (){
    		  if($(this).val()==="1"){
    			 $('#borrowTimeDiv').show();
    			 $('#startTime,#endTime').attr("required","required");
    		  }else{
     			 $('#borrowTimeDiv').hide();
    			 $('#startTime,#endTime').removeAttr("required");
    		  }
    	  })
      }();
      </script>
      </body>
</html>